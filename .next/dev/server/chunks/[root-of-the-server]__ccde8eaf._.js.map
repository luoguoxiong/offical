{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/peroluo/work/offical/src/pages/api/send.ts"],"sourcesContent":["import nodemailer from \"nodemailer\";\n\nexport default async function handler(req, res) {\n  if (req.method !== \"POST\") {\n    return res.status(405).json({ message: \"Method Not Allowed\" });\n  }\n\n  const { email, name, content } = req.body;\n  console.log(email,name,content)\n  try {\n    const transporter = nodemailer.createTransport({\n      host: \"smtp.qq.com\",\n      port: 465,\n      secure: true,\n      auth: {\n        user: process.env.EMAIL_USER,\n        pass: process.env.EMAIL_PASS,\n      },\n    });\n\n    await transporter.sendMail({\n      from: process.env.EMAIL_USER,\n      to: \"wslyfs2010@gmail.com\",\n      subject: \"收到一个新的客户邮件\",\n      html: `\n        <p>name: ${name}</p>\n        <p>email: ${email}</p>\n        <p>content: ${content}</p>\n      `,\n    });\n\n    res.status(200).json({ code: 200, message: \"ok\" });\n  } catch (error) {\n    console.log(error);\n    res.status(500).json({ message: \"邮件发送失败\" });\n  }\n}"],"names":[],"mappings":";;;;AAAA;;AAEe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC5C,IAAI,IAAI,MAAM,KAAK,QAAQ;QACzB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAqB;IAC9D;IAEA,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAI,IAAI;IACzC,QAAQ,GAAG,CAAC,OAAM,MAAK;IACvB,IAAI;QACF,MAAM,cAAc,wHAAU,CAAC,eAAe,CAAC;YAC7C,MAAM;YACN,MAAM;YACN,QAAQ;YACR,MAAM;gBACJ,MAAM,QAAQ,GAAG,CAAC,UAAU;gBAC5B,MAAM,QAAQ,GAAG,CAAC,UAAU;YAC9B;QACF;QAEA,MAAM,YAAY,QAAQ,CAAC;YACzB,MAAM,QAAQ,GAAG,CAAC,UAAU;YAC5B,IAAI;YACJ,SAAS;YACT,MAAM,CAAC;iBACI,EAAE,KAAK;kBACN,EAAE,MAAM;oBACN,EAAE,QAAQ;MACxB,CAAC;QACH;QAEA,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,MAAM;YAAK,SAAS;QAAK;IAClD,EAAE,OAAO,OAAO;QACd,QAAQ,GAAG,CAAC;QACZ,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAS;IAC3C;AACF"}}]
}